<cruisecontrol>
    <!--
    Note: If you change this file the changes will be picked up on the checkin *following*
     the checkin of this file. 
     -->
    <project name="WindowLicker" buildafterfailed="false">

        <property name="cruisehome" value="/data/cruise/cruisecontrol-bin-2.7.1"/>

        <property name="top" value="projects/windowlicker"/>
        <property name="logs" value="logs/windowlicker"/>
        <property name="artifacts" value="logs/windowlicker"/>

        <!-- Bootstrappers are run every time the build runs, *before* the modification checks -->

        <bootstrappers>
            <svnbootstrapper localworkingcopy="${top}" file="cruiseconfig.xml"/>
            <svnbootstrapper localworkingcopy="${top}" file="cruisebuild.xml"/>
            <svnbootstrapper localworkingcopy="${top}" file="build.xml"/>
        </bootstrappers>

        <!-- Defines where cruise looks for changes, to decide whether to run the build -->
        <modificationset quietperiod="10">
            <svn localworkingcopy="${top}"/>
        </modificationset>

        <!-- Configures the actual build loop, how often and which build file/target -->
        <schedule interval="60">
            <ant buildfile="${top}/cruisebuild.xml" target="cruise" uselogger="true"
                 anthome="/data/cruise/tools/apache-ant-1.7.0">
            </ant>
        </schedule>

        <log dir="${logs}">
            <merge dir="${top}/build/test/output/"/>
        </log>

        <listeners>
            <currentbuildstatuslistener file="${logs}/status.txt"/>
        </listeners>

        <publishers>
            <htmlemail mailhost="localhost"
                   returnaddress="cruise@time4tea.net"
                   buildresultsurl="http://www.time4tea.net:7060/cruisecontrol/buildresults/windowlicker"
                   skipusers="true"
                   spamwhilebroken="true"
                   reportsuccess="always"
                   subjectprefix="[Cruise][Windowlicker] - "
                   css="${cruisehome}/webapps/cruisecontrol/css/cruisecontrol.css"
                   xsldir="${cruisehome}/webapps/cruisecontrol/xsl"
                   logdir="${logs}">
                <always address="windowlicker@time4tea.net"/>
                <!--<map alias="nat" address="nat.pryce@gmail.com"/>-->
                <!--<map alias="nick" address="nick.pomfret@snowmonkey.co.uk"/>-->
                <!--<map alias="richja" address="james@time4tea.net"/>-->
            </htmlemail>
            <!--
              We still publish out the artifacts on failure, so can see nice html test report
              not yet...
            -->
            <!--<artifactspublisher dir="${top}/build/deploy" dest="${artifacts}"/>-->
        </publishers>
    </project>
</cruisecontrol>